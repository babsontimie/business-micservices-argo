global:
  imagePullPolicy: IfNotPresent
  namespace: dev

image:
  repository: oktbabs
  pullPolicy: IfNotPresent
  tag: ""

commonLabels:
  app.kubernetes.io/part-of: business

resources: {}

ingressClassName: ""

tls:
  enabled: false
  secretName: ""

microservices:

  frontend:
    name: frontend
    image: oktbabs/frontend:latest
    replicas: 2
    port: 8080
    containerPort: 8080
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 2
      maxReplicas: 5
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 70
    ingress:
      enabled: true
      host: frontend.example.com
      path: /

  emailservice:
    name: emailservice
    image: oktbabs/emailservice:latest
    replicas: 1
    port: 5000
    containerPort: 5000
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 5000
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 5000
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65
    ingress:
      enabled: true
      host: email.example.com
      path: /

  adservice:
    name: adservice
    image: oktbabs/adservice:latest
    replicas: 1
    port: 9555
    containerPort: 9555
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 9555
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 9555
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

  shippingservice:
    name: shippingservice
    image: oktbabs/shippingservice:latest
    replicas: 1
    port: 50051
    containerPort: 50051
    env:
      - name: DISABLE_PROFILER
        value: "1"    
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 50051
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 50051
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

  currencyservice:
    name: currencyservice
    image: oktbabs/currencyservice:latest
    replicas: 1
    port: 7000
    containerPort: 7000
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 7000
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 7000
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

  redis-cart:
    name: redis-cart
    image: oktbabs/redis-cart:latest
    replicas: 1
    port: 6379
    containerPort: 6379
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      tcpSocket:
        port: 6379
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      tcpSocket:
        port: 6379
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 50

  loadgenerator:
    name: loadgenerator
    image: oktbabs/loadgenerator:latest
    replicas: 1
    port: 8080
    containerPort: 8080
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 2
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 50

  cartservice:
    name: cartservice
    image: oktbabs/cartservice:latest
    replicas: 1
    port: 50051
    containerPort: 50051
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 50051
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 50051
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

  productcatalogservice:
    name: productcatalogservice
    image: oktbabs/productcatalogservice:latest
    replicas: 1
    port: 3550
    containerPort: 3550
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 3550
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 3550
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

  paymentservice:
    name: paymentservice
    image: oktbabs/paymentservice:latest
    replicas: 1
    port: 50051
    containerPort: 50051
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 50051
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 50051
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

  recommendationservice:
    name: recommendationservice
    image: oktbabs/recommendationservice:latest
    replicas: 1
    port: 8080
    containerPort: 8080
    productCatalogServiceAddr: "productcatalogservice:3550"
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      exec:
        command: ["/bin/grpc_health_probe", "-addr=:8080"]
      periodSeconds: 5
    readinessProbe:
      exec:
        command: ["/bin/grpc_health_probe", "-addr=:8080"]
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

  checkoutservice:
    name: checkoutservice
    image: oktbabs/checkoutservice:latest
    replicas: 1
    port: 5050
    containerPort: 5050
    profiler:
      enabled: false
      projectId: ""
    livenessProbe:
      httpGet:
        path: /healthz
        port: 5050
      initialDelaySeconds: 5
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /ready
        port: 5050
      initialDelaySeconds: 5
      periodSeconds: 5
    hpa:
      enabled: true
      minReplicas: 1
      maxReplicas: 3
      metrics:
        - type: Resource
          resource:
            name: cpu
            target:
              type: Utilization
              averageUtilization: 65

